<?class Ajax{	public function estadosAjax($CFG)	{	 		$Tempo    = $CFG['Tempo'];		$Sucesso  = $CFG['Sucesso'];		$Falha    = $CFG['Falha'];		$Completa = $CFG['Completa'];						$Funcao .= (!empty($Completa)) ? "\ncomplete:$Completa," : null;				$Funcao .= (!empty($Falha))    ? "\nerror:$Falha,"       : null;		$Funcao .= (!empty($Sucesso))  ? "\nsuccess:$Sucesso,"   : null;		$Funcao .= (!empty($Tempo))    ? "\ntimeout:$Tempo,"     : null;				//Retura a Ultima Virgula		if(!empty($Funcao))	$Funcao = substr($Funcao, 0, -1);  					return $Funcao;	}		public function ajaxRequestForm($CFG)	{		//Configuração do Campo		$Nome        = $CFG['Nome']; 		$ParInicial  = $CFG['ParInicial']; 		$URL         = $CFG['URL'];		$Metodo      = empty($CFG['Metodo'])   ? "post" : $CFG['Metodo'];		$TipoDado    = empty($CFG['TipoDado']) ? "html" : $CFG['TipoDado'];		$ChamaFuncao = $CFG['ChamaFuncao']; 				//Parametro Inicial Adcional		if(!empty($ParInicial))	$ParInicial = ",".$ParInicial;				$Funcao .= "function $Nome(form, conteiner $ParInicial){ $ChamaFuncao \$.ajax({url:'$URL', type: '$Metodo', datatype:'$TipoDado',";				$Funcao .= "data: \$('#'+form).fastSerialize()";								$Estados = $this->estadosAjax($CFG);				if(!empty($Estados))		$Funcao .= ",".$Estados; 									$Funcao .= " })}\n";				return $Funcao;	}			public function ajaxRequest($CFG)	{		//Configuração do Campo		$Nome        = $CFG['Nome']; 		$ParInicial  = $CFG['ParInicial']; 		$URL         = $CFG['URL'];		$Form        = empty($CFG['Form'])     ? "Form" : $CFG['Form'];		$Metodo      = empty($CFG['Metodo'])   ? "post" : $CFG['Metodo'];		$TipoDado    = empty($CFG['TipoDado']) ? "html" : $CFG['TipoDado'];		$Parametros  = $CFG['Parametros']; 		$ChamaFuncao = $CFG['ChamaFuncao']; 				$Funcao .= "function $Nome($ParInicial){ $ChamaFuncao $.ajax({\nurl:'$URL',type: '$Metodo',datatype:'$TipoDado',";				$Par = (empty($Parametros)) ? "\$('#$Form').fastSerialize() " : $Parametros;		$Funcao .= "data: ".$Par;							$Estados = $this->estadosAjax($CFG);				if(!empty($Estados))		$Funcao .= ",".$Estados; 								$Funcao .= " })}\n";				return $Funcao;	}		/*	public function ajaxRequestPar($CFG)	{		//Configuração do Campo		$Nome       = $CFG['Nome']; 		$URL        = $CFG['URL'];		$Form       = empty($CFG['Form'])     ? "Form" : $CFG['Form'];		$Metodo     = empty($CFG['Metodo'])   ? "post" : $CFG['Metodo'];		$TipoDado   = empty($CFG['TipoDado']) ? "html" : $CFG['TipoDado'];		$Parametros = $CFG['Parametros']; 				$Funcao .= "function $Nome{ $.ajax({\nurl:'$URL',type: '$Metodo',datatype:'$TipoDado',";				$Par = (empty($Parametros)) ? "\$('#$Form').fastSerialize() " : $Parametros;		$Funcao .= "data: ".$Par;							$Estados = $this->estadosAjax($CFG);				if(!empty($Estados))		$Funcao .= ",".$Estados; 								$Funcao .= " })}\n";				return $Funcao;	}	*/		public function ajaxUpdate($CFG)	{		//Configuração do Campo		$Nome        = $CFG['Nome'];		$ParInicial  = $CFG['ParInicial']; 		$URL         = $CFG['URL'];		$Conteiner   = $CFG['Conteiner'];		$Form        = empty($CFG['Form'])     ? "Form" : $CFG['Form'];		$Metodo      = empty($CFG['Metodo'])   ? "post" : $CFG['Metodo'];		$TipoDado    = empty($CFG['TipoDado']) ? "html" : $CFG['TipoDado'];		$VarPar      = $CFG['VarPar'];		$Parametros  = $CFG['Parametros']; 		$Cache       = empty($CFG['Cache'])    ? "true" : $CFG['Cache'];		$ChamaFuncao = $CFG['ChamaFuncao']; 				if(!empty($VarPar))		{			$Funcao  = "var $VarPar = null;";			$ParP    = "p";			$PegaPar = "$VarPar = (p != null) ? p+\"&\"+\$('#$Form').fastSerialize() : \$('#$Form').fastSerialize();";						//Parametro Inicial Adcional			if(!empty($ParInicial))	$ParInicial = ",".$ParInicial;		}				$Funcao .= "\nfunction $Nome($ParP $ParInicial) { $ChamaFuncao $PegaPar request$Nome(); } ";				$Funcao .= "\nfunction request$Nome($ParInicial) { $.ajax({ url:'$URL', cache: $Cache, type: '$Metodo', datatype:'$TipoDado'";		if(!empty($Parametros) or !empty($VarPar))		{			$Par = (empty($Parametros)) ? $VarPar : $Parametros;		}				//Para Resolver Bug do Firefox		if(empty($Par)) $Par = '{\'Demp\':\'Demp\'}';				$Funcao .= ",data: ".$Par;				//Sucesso		$CFG['Sucesso'] = "function(Req){ if(!sis_interceptaRetorno(Req)) return; \$('#$Conteiner').html(Req); ".$CFG['Sucesso']."}";					$Estados = $this->estadosAjax($CFG);						if(!empty($Estados))		$Funcao .= ",".$Estados; 							$Funcao .= " })}\n";				return $Funcao;	}	public function ajaxLoad($CFG)	{		//Configuração do Campo		$Nome        = $CFG['Nome'];		$ParInicial  = $CFG['ParInicial'];		$URL         = $CFG['URL'];		$Parametros  = $CFG['Parametros']; 		$ChamaFuncao = $CFG['ChamaFuncao']; 							//Parametro Inicial Adcional		if(!empty($ParInicial))	$ParInicial = ",".$ParInicial;				$Funcao .= "\nfunction $Nome(form, conteiner $ParInicial) { $ChamaFuncao \$('#'+form+' #'+conteiner).load('$URL'";		if(!empty($Parametros))		{			$Funcao .= ",".$Parametros;		}				$Funcao .= " );}\n";				return $Funcao;	}			}?>