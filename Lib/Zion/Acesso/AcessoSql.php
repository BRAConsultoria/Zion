<?php/** *   @author Pablo Vanni - pablovanni@gmail.com *   @since 28/02/2005 *   Última Atualização: 14/10/2014 *   Autualizada Por: Pablo Vanni - pablovanni@gmail.com *   @name Sql */namespace Zion\Acesso;class AcessoSql{    /**     * 	Retorna a descrição do módulo indicado pelo parametro     * 	@return String     */    public function dadosModulo($moduloNome)    {        return "SELECT  moduloCod, grupoCod, moduloCodReferente,                         moduloNome, moduloNomeMenu, moduloDesc, moduloVisivelMenu,                         moduloPosicao, moduloBase, moduloClass                                     FROM    _modulo                                 WHERE   moduloNome = '$moduloNome'";    }    /**     * 	Verifica se o usuário tem permissão para acessar o módulo     * 	@return String     */    public function permissaoAcao($moduloNome, $acaoModuloIdPermissao, $usuarioCod)    {        return "SELECT 	a.usuarioCod                                 FROM 	_permissao a INNER JOIN _acao_modulo b ON (a.acaoModuloCod = b.acaoModuloCod)                        INNER JOIN _modulo c ON (c.moduloCod = b.moduloCod)                                 WHERE 	a.usuarioCod = $usuarioCod AND                         b.acaoModuloIdPermissao = '$acaoModuloIdPermissao' AND                         c.moduloNome = '$moduloNome'";    }    /**     * 	Retorna as opções que o usuário tem direito     * 	@return String     */    public function permissoesModulo($moduloNome, $usuarioCod)    {        return "SELECT 	b.acaoModuloCod, b.moduloCod, b.acaoModuloPermissao,                         b.acaoModuloIdPermissao, b.acaoModuloClass, b.acaoModuloIcon,                         b.acaoModuloToolTipComPermissao,                         b.acaoModuloToolTipeSemPermissao, b.acaoModuloFuncaoJS,                         b.acaoModuloPosicao, b.acaoModuloApresentacao                                  FROM 	_permissao a INNER JOIN _acao_modulo b ON (a.acaoModuloCod = b.acaoModuloCod)                        INNER JOIN _modulo c ON (c.moduloCod = b.moduloCod)                                 WHERE 	a.usuarioCod = $usuarioCod AND                                            c.moduloNome = '$moduloNome'";    }    /**     * AcessoSql::dadosAcaoModulo()     *      * @param mixed $moduloNome     * @param mixed $acaomoduloIdPermissao     * @return     */    public function dadosAcaoModulo($moduloNome, $acaoModuloIdPermissao)    {        return "SELECT 	a.acaoModuloCod, a.moduloCod, a.acaoModuloPermissao,                         a.acaoModuloIdPermissao, a.acaoModuloClass, a.acaoModuloIcon,                        a.acaoModuloToolTipComPermissao,                         a.acaoModuloToolTipeSemPermissao, a.acaoModuloFuncaoJS,                         a.acaoModuloPosicao, a.acaoModuloApresentacao                                FROM 	_acao_modulo a INNER JOIN _modulo b ON(a.moduloCod = b.moduloCod)                                WHERE 	b.moduloNome = '$moduloNome' AND                         a.acaoModuloIdPermissao = '$acaoModuloIdPermissao'";    }}